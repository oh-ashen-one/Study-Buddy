# Study Buddy - AI Development Guidelines

> **Read this before writing ANY code.** These rules are non-negotiable.

---

## ğŸ¯ Project Overview

**Study Buddy** is an AI-powered college command center. Students use it to organize their chaotic academic lives - managing schedules, finding study spots, tracking assignments, and getting AI help.

**Tech Stack:** Whatever Replit recommends, but must support OAuth, PostgreSQL, OpenAI API, file uploads, and external API calls.

**Design Philosophy:** Clean, minimal, dark mode. Think Notion + Linear. Never generic. Never boring.

---

## ğŸš¨ CRITICAL: Planning Before Coding

### The Double-Check Rule

**NEVER write code immediately.** Always follow this flow:

```
1. UNDERSTAND â†’ Read the request fully. Ask clarifying questions if anything is ambiguous.
2. PLAN â†’ Write out the approach in plain English BEFORE any code.
3. PREVIEW â†’ Show the plan and get confirmation.
4. BUILD â†’ Only then write the actual code.
5. TEST â†’ Verify it works. Check edge cases.
6. REVIEW â†’ Look for bugs, security holes, and improvements.
```

### Before Every Feature, Answer:

- What problem does this solve?
- What's the simplest implementation?
- What could break?
- What are the security implications?
- Does this match the design system?

---

## ğŸ¨ Design System - MANDATORY

### Banned Forever (AI Slop)

These choices scream "AI made this" - never use them:

| âŒ BANNED | âœ… USE INSTEAD |
|-----------|----------------|
| Purple/violet gradients | Rich golds, deep teals, warm ambers |
| Inter, Roboto, Arial fonts | Distinctive fonts with character |
| Glassmorphism/frosted glass | Solid, intentional surfaces |
| Generic blue (#007bff) | Custom brand colors |
| Rounded everything (border-radius: 9999px) | Intentional radius choices |
| Rainbow gradients | Monochromatic or complementary pairs |
| Gratuitous blur effects | Sharp, defined edges |
| Stock illustration style | Custom, contextual graphics |
| "Modern" = white + shadows | Dark mode with depth |
| Floating cards with no purpose | Purposeful visual hierarchy |

### Color Palette (Dark Mode)

```css
:root {
  /* Backgrounds */
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-elevated: #252525;
  
  /* Text */
  --text-primary: #f5f5f5;
  --text-secondary: #a0a0a0;
  --text-muted: #666666;
  
  /* Accents - choose ONE as primary */
  --accent-gold: #c9a227;
  --accent-teal: #2dd4bf;
  --accent-coral: #f472b6;
  
  /* Semantic */
  --success: #22c55e;
  --warning: #eab308;
  --error: #ef4444;
  
  /* Borders */
  --border-subtle: rgba(255, 255, 255, 0.08);
  --border-visible: rgba(255, 255, 255, 0.15);
}
```

### Typography Rules

1. **Max 2 font families** - One display, one body
2. **Hierarchy through weight and size**, not color
3. **Line height 1.5-1.7** for body text
4. **Letter spacing** - Slight tracking on headings, normal on body
5. **No ALL CAPS except for tiny labels**

### Spacing System

Use consistent spacing scale: `4px, 8px, 12px, 16px, 24px, 32px, 48px, 64px`

Never use arbitrary values like `13px` or `27px`.

### Animation Guidelines

```css
/* Standard easing */
--ease-out: cubic-bezier(0.22, 1, 0.36, 1);
--ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);

/* Standard durations */
--duration-fast: 150ms;
--duration-normal: 250ms;
--duration-slow: 400ms;
```

- Animations should be **purposeful**, not decorative
- Prefer opacity + transform over other properties
- Never animate layout properties (width, height, top, left)
- Reduced motion: Always respect `prefers-reduced-motion`

---

## âœï¸ Writing Style - No AI Cringe

### Banned Phrases (Delete on Sight)

```
- "Dive into..."
- "Unleash the power of..."
- "Elevate your..."
- "Seamlessly integrate..."
- "Cutting-edge..."
- "Revolutionary..."
- "Game-changing..."
- "Harness the potential..."
- "Embark on a journey..."
- "Leverage..."
- "Robust solution..."
- "Streamline your workflow..."
- "Take it to the next level..."
- "In today's fast-paced world..."
- "Look no further..."
```

### Good Writing Is:

- **Direct** - Say what you mean
- **Specific** - Use concrete details
- **Human** - Write like you talk
- **Brief** - Cut unnecessary words

### Examples

| âŒ Bad | âœ… Good |
|--------|---------|
| "Dive into your personalized study journey" | "Your study spots" |
| "Seamlessly manage your academic life" | "Track assignments" |
| "Leverage AI to elevate your grades" | "Ask AI anything" |
| "An error has occurred" | "Couldn't save - try again" |

---

## ğŸ”’ Security Rules - NON-NEGOTIABLE

### Authentication & Sessions

```javascript
// âœ… DO: Use secure session configuration
{
  httpOnly: true,
  secure: true,
  sameSite: 'strict',
  maxAge: 7 * 24 * 60 * 60 * 1000 // 7 days
}

// âŒ DON'T: Store sensitive data in localStorage
localStorage.setItem('authToken', token) // NEVER DO THIS
```

### API Keys & Secrets

- **NEVER** hardcode API keys in code
- **NEVER** commit `.env` files
- **ALWAYS** use Replit Secrets for sensitive values
- **ALWAYS** validate environment variables exist on startup

```javascript
// âœ… DO: Validate secrets exist
const OPENAI_KEY = process.env.OPENAI_API_KEY;
if (!OPENAI_KEY) {
  throw new Error('Missing OPENAI_API_KEY - add it to Replit Secrets');
}

// âŒ DON'T: Use fallback values for secrets
const OPENAI_KEY = process.env.OPENAI_API_KEY || 'sk-xxx'; // DANGEROUS
```

### Input Validation

**Trust nothing from the user. Ever.**

```javascript
// âœ… DO: Validate and sanitize all inputs
const email = sanitizeEmail(req.body.email);
const courseId = parseInt(req.params.id, 10);
if (isNaN(courseId) || courseId < 0) {
  return res.status(400).json({ error: 'Invalid course ID' });
}

// âŒ DON'T: Use user input directly
const query = `SELECT * FROM courses WHERE id = ${req.params.id}`; // SQL INJECTION
```

### Database Security

- Use parameterized queries / prepared statements ALWAYS
- Implement rate limiting on all endpoints
- Hash passwords with bcrypt (cost factor 12+)
- Never return full database objects - select only needed fields

```javascript
// âœ… DO: Parameterized query
const user = await db.query('SELECT id, name, email FROM users WHERE id = $1', [userId]);

// âŒ DON'T: String concatenation
const user = await db.query(`SELECT * FROM users WHERE id = ${userId}`);
```

### OAuth Security (Gmail Integration)

- Request minimum necessary scopes
- Store refresh tokens encrypted
- Implement token revocation on logout
- Handle token expiry gracefully

```javascript
// âœ… DO: Minimal scopes
const SCOPES = [
  'https://www.googleapis.com/auth/gmail.readonly' // Start with read-only
];

// âŒ DON'T: Request everything
const SCOPES = ['https://mail.google.com/']; // Full access - too broad
```

### File Upload Security

```javascript
// âœ… DO: Validate file uploads
const ALLOWED_TYPES = ['image/png', 'image/jpeg', 'application/pdf'];
const MAX_SIZE = 5 * 1024 * 1024; // 5MB

if (!ALLOWED_TYPES.includes(file.mimetype)) {
  return res.status(400).json({ error: 'Invalid file type' });
}
if (file.size > MAX_SIZE) {
  return res.status(400).json({ error: 'File too large' });
}

// âŒ DON'T: Accept any file
app.post('/upload', (req, res) => {
  saveFile(req.file); // No validation = disaster
});
```

---

## ğŸ—ï¸ Code Architecture

### File Structure

```
/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # Reusable UI components
â”‚   â”œâ”€â”€ pages/          # Route pages
â”‚   â”œâ”€â”€ hooks/          # Custom React hooks
â”‚   â”œâ”€â”€ utils/          # Helper functions
â”‚   â”œâ”€â”€ services/       # API calls, external services
â”‚   â”œâ”€â”€ styles/         # Global styles, theme
â”‚   â””â”€â”€ types/          # TypeScript types (if using TS)
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ routes/         # API route handlers
â”‚   â”œâ”€â”€ middleware/     # Auth, validation, rate limiting
â”‚   â”œâ”€â”€ services/       # Business logic
â”‚   â””â”€â”€ db/             # Database queries, migrations
â”œâ”€â”€ public/             # Static assets
â””â”€â”€ tests/              # Test files mirror src/ structure
```

### Naming Conventions

| Type | Convention | Example |
|------|------------|---------|
| Components | PascalCase | `StudySpotCard.jsx` |
| Hooks | camelCase with "use" | `useStudySpots.js` |
| Utils | camelCase | `formatDate.js` |
| Constants | SCREAMING_SNAKE | `MAX_FILE_SIZE` |
| CSS classes | kebab-case | `.spot-card-header` |
| Database tables | snake_case | `study_spots` |
| API routes | kebab-case | `/api/study-spots` |

### Component Guidelines

```jsx
// âœ… DO: Single responsibility, clear props
function StudySpotCard({ spot, onSelect, isSelected }) {
  return (
    <article 
      className={`spot-card ${isSelected ? 'spot-card--selected' : ''}`}
      onClick={() => onSelect(spot.id)}
    >
      <h3>{spot.name}</h3>
      <p>{spot.description}</p>
    </article>
  );
}

// âŒ DON'T: Kitchen sink components
function StudySpotCard({ spot, user, filters, onSelect, onEdit, onDelete, onShare, onReport, showActions, isAdmin, ... }) {
  // 500 lines of code
}
```

### Error Handling

```javascript
// âœ… DO: Specific, actionable errors
try {
  await saveAssignment(data);
} catch (error) {
  if (error.code === 'DUPLICATE') {
    showToast('This assignment already exists');
  } else if (error.code === 'NETWORK') {
    showToast('No internet - saved locally, will sync later');
  } else {
    showToast('Couldn\'t save - try again');
    logError(error); // Send to error tracking
  }
}

// âŒ DON'T: Generic errors
try {
  await saveAssignment(data);
} catch (error) {
  showToast('Something went wrong'); // Useless
}
```

---

## ğŸ“± Responsive Design

### Breakpoints

```css
/* Mobile first - then scale up */
--bp-sm: 640px;   /* Large phones */
--bp-md: 768px;   /* Tablets */
--bp-lg: 1024px;  /* Laptops */
--bp-xl: 1280px;  /* Desktops */
```

### Mobile Requirements

- Touch targets minimum 44x44px
- No hover-only interactions
- Bottom navigation for primary actions (thumb-friendly)
- Forms should be single-column
- Test on actual devices, not just Chrome DevTools

---

## âš¡ Performance Rules

### Loading States

Every async action needs three states:

1. **Loading** - Show skeleton or spinner
2. **Success** - Show the data
3. **Error** - Show what went wrong + retry option

```jsx
// âœ… DO: Handle all states
function StudySpots() {
  const { data, isLoading, error } = useStudySpots();
  
  if (isLoading) return <SpotsSkeleton />;
  if (error) return <ErrorState onRetry={refetch} />;
  return <SpotsList spots={data} />;
}
```

### Image Optimization

- Use WebP format when possible
- Lazy load images below the fold
- Provide width/height to prevent layout shift
- Use responsive images with srcset

### Database Queries

- Add indexes for frequently queried columns
- Paginate large result sets (max 50 per page)
- Cache expensive queries (user preferences, etc.)
- Never SELECT * - only select needed columns

---

## ğŸ§ª Testing Checklist

Before marking any feature complete:

- [ ] Works on mobile (iPhone SE size)
- [ ] Works with keyboard only (accessibility)
- [ ] Works with slow network (3G throttle)
- [ ] Works when API fails (error states)
- [ ] No console errors or warnings
- [ ] Follows design system exactly
- [ ] No hardcoded strings (i18n ready)
- [ ] Security rules followed

---

## ğŸš€ Deployment Checklist

- [ ] All secrets in Replit Secrets, not code
- [ ] Database migrations tested
- [ ] Error tracking configured
- [ ] Rate limiting enabled
- [ ] HTTPS enforced
- [ ] CORS configured correctly
- [ ] CSP headers set
- [ ] No debug logs in production

---

## ğŸ“ Commit Message Format

```
type: short description

- Detail 1
- Detail 2

Types: feat, fix, docs, style, refactor, test, chore
```

Examples:
- `feat: add study spot filtering by amenities`
- `fix: resolve OAuth token refresh loop`
- `docs: update API endpoint documentation`

---

## ğŸ†˜ When Stuck

1. **Re-read this document** - The answer might be here
2. **Check the plan** - Are you solving the right problem?
3. **Simplify** - What's the minimum viable solution?
4. **Ask** - Describe the problem, what you tried, what happened

---

*Last updated: January 2026*
*Maintainer: Hari*